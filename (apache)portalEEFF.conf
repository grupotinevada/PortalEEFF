
<VirtualHost *:80>
    ServerName portaleefftest.inevada.cl

    # --- Configuración del Proxy Inverso y WebSockets ---
    # Redirige el tráfico WebSocket al backend
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*) ws://192.168.101.16:4003/$1 [P,L]

    # Redirige el tráfico HTTP normal al backend
    ProxyPass / http://192.168.101.16:4003/
    ProxyPassReverse / http://192.168.101.16:4003/
    ProxyPreserveHost On

    # --- Configuración de Cabeceras ---
    # Para la sección de seguridad adicional
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-Content-Type-Options "nosniff"

    # Para deshabilitar la caché en archivos .html
    <FilesMatch "\.html$">
        Header set Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>

</VirtualHost>